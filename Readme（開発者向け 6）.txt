■HoneyWaffleさんのTwitterにて

＞早石田の変化、まふ定跡対策で相手番の指し手も含んでいる。それ含んでるとライセンスを先方と揃えてGPL-3.0にしないといけないのかな

えっと、まふ定跡のGitHubがGPL-3.0については、
以前どこだったかApery開発者とうさぴょん開発者が「定跡バイナリは指し手に評価値を付けたり改良の余地があって、思考部として……」みたいなのをどこかで見ました。
なので私が配布している定跡形式はApery形式と技巧形式となっており、この定跡形式の箱の部分にひょっとしたらライセンスが引っかかるかもと思い、GPL-3.0にしています。
ですから中身の部分については、私は著作権等の制限を一切かけないのでご自由にどうぞ。
HoneyWaffleさんの配布されています定跡形式は、ただのsfen形式の.dbファイルですからGPL-3.0は必要ないと思います。
が、一番上にYANEURAOU-DB2016 1.00と書いていますので、やねうら王開発者の許可が厳密には必要かも？
まあ、やねうら王開発者は定跡形式を統一したいと考えている方なので、ライセンスどうこう言うことは無いでしょうけど。

※私はプライベートではTwitter等一切やりませんし、スマホすら持たない主義なので、こんなところにしか書けません。
誰かHoneyWaffleさんのTwitterにお伝えしていただければと思います。



■他Twitterにて

Qhapaqさん＞有志によるQhapaqとelmoの勝率みるとQhapaqの後手番が弱くて驚きます。定跡の相性かな......

rangingさん＞2スレ：0.5秒　Qhapaq（やね探索、評価関数Qhapaq、定跡Qhapaq_Z) 対elmo（やね探索、評価関数elmo、定跡elmo）の結果 
　　　　　　少なくとも100局くらいじゃ有意な差は出ない。出ないんだけど両者先手勝率が異様に高い。定跡ガチャってより振り駒ガチャだった可能性？

この辺感覚的な物が強く言語化が難しいのですが、そのうち開発過程の様子と絡めて出来るだけ説明したいと思います。



■elmo定跡について

elmo定跡については、開発の過程でまふ定跡をメタる＝結果的になぞる部分が多くなります。
これについて私は「こいつパクりやがって」なんてまったく思いません！
むしろありがたいと思っています。

なぜならReadme（開発者向け 5）の１０５行目から書いているように、
去年の技巧定跡を越えるのに１０日、その後浮かむ瀬定跡ＯＦＦを超えるのに５日で、wcsc27までの１７０日間はひたすらに自己更新しか出来なかったからです。
相手は実質「浮かむ瀬評価関数」しかこの半年間おらず、それはもう砂漠の中から黄金の一粒を見つけるような作業が延々と続くだけでしたから。
人によってはコレだけ苦労したのをパクりやがってと憤慨する人もいるかもしれませんが、私からすればelmo定跡は浮かむ瀬評価関数より強い評価関数を使って、
elmo開発者がわざわざリソースを割いて指し手選抜してくれてるのだから、これほど楽なことはありません。

これは河童全力定跡やHoneyWaffle定跡にも言えることで、もうこの３つをまふ定跡ver11に足して調整したものをver12で配布すれば良いのではないかと喜んでいます。



■tanuki-さんへ

えびちゃんの第27回世界コンピュータ将棋選手権 3日目【会場から生中継】 の再放送を見ていたんですが、
tanuki-さんのコメントで「まふ定跡のガチャを全敗している」と言っていましたので棋譜を確認してきました。

そうしましたら、おかしな指し手ばかり拾っていましたので、エンジン側の選択設定が上手くいっていなかったと思われます。

具体例）決勝 2回戦 蒼天幻想ナイツ・オブ・タヌキ - Ponanza Chainer

一発定跡（改）の９手目は、６八銀が採用率１００の勝率５４％、７八銀が採用率０．０１の勝率６０％ですが７八銀を選択しています。
１９手目は、７八金が採用率１．１６の勝率５１％、３七桂馬が採用率０．０１の勝率９８％ですが３七桂馬を選択しています。

Readme 9(技巧版ver10)を見ていただけたら分かる通り、私は手入力で指し手調整している関係で勝率がおかしくなるため、
NarrowBook＝ＯＦＦにするように注意文を記載しております。

おそらくですがこの関係で変なルートばかりに入っていっていたものだと推測しています。

Twitterにて＞蒼天幻想ナイツ・オブ・タヌキの最大のウリは、Apery定跡データベースが使えるところなんじゃないかなぁ…。
やねうら王+elmo評価関数ファイル+まふ定跡という夢のコラボが楽しめるようになるはずです…。

と書かれていましたので、配布するエンジンはどんな状態でしょうか？
（私のＰＣだとＡＶＸ２は起動しませんので、ＳＳＥ４．２対応であれば確認できますが）


【不具合報告】GitHubの使い方をマスターしていないので、とりあえずココに書いておきます

①Apery形式の定跡の読み込みがおかしい
※まずNarrowBookをＯＮにしようがＯＦＦにしようが指し手選択は変わりません＝採用率で選ぶ設定と推測します
※１局面で複数手の登録が有る場合、採用率１位、２位、３位の３手とか有る場合に最も採用率が低いものを選択します。
エンジン側の定跡採用率の選択順位が逆になっていると推測します。
（wcsc27はまふ定跡のApery形式を使用した場合、採用率の入った最も最悪な指し手ばかり選択しています。これで良く世界５位になれましたね……）

②ＳＳＥ４．２が定跡がヒットすると（定跡進行中）にエンジン停止をする
※ResignValueが原因と思います。デフォルトの99999ではエラー落ちします。3000とかに値を変更すると動きました。
（やねうら王に投了設定が付いた最初期に同様のエラーが有ったと思います）

③ＳＳＥ４．２が思考開始直後にエンジン停止をする
※こちらについてはさっぱり原因が分かりません。


tanuki-さんのTwitterにて＞まふ様より雑記でtanuki-のApery定跡読み込みルーチンの不具合報告を頂きました。NarrowBookが反映されないバグは確認できました。
採択率が一番悪い手ばかりが採択されるバグは確認できませんでした。現在の実装では当確率で採択されるはずです。

現在私のＰＣではSSE4.2しか確認出来ないので、ShogiGUIを使用し検討モードで定跡選択順位を確認したところ、
最善手、次善手、３番手の順位がすべて採用率の低い順位で表示されていますので、逆になっていると思います。（wcsc27の定跡選択手も）
やねうら王はたしかＰＶの表示がすべて逆表示するソフトでしたが、対局中の選択手が逆になるわけではないので表示ミスは修正されていなかったと記憶しております。
この辺が定跡選択で悪さしていませんか？



■これだけは言っておきたい

【ポナに圧勝】史上最強ソフトelmo 無料公開される。を見ているとelmo定跡に不満のある方が多いようです。
それについてelmo開発者やQhapaq開発者もTwitterで悩んでいる様子を見ました。

２０１６年の電王戦では定跡ＯＦＦがトレンド。
今後は定跡とかいらないよみたいな風潮だったので、私から見れば序盤穴だらけの将棋ソフトが何の冗談だと思い、一石を投じてみました。
何にせよ口だけなら誰でも言えるし、やってみせるしかないわけで一人奮起した結果が「まふ定跡」です。

私は定跡を作成しているときに一度「将棋の５０手目までの有効手っていくつあるんだろ？」と考えたことが有ります。
私の答えは約６０００万手の組み合わせです。
人間の対局と同じ比率で局面合流すると仮定した場合１/５となりますので、５０手目までの有効手は約１２００万手です。

まふ定跡では私１人が半年かけて５０手目までは、約３０万手程度見つけて登録することが出来ました。
つまり、まふ定跡でさえたったの２％くらい解析が終わった所です。

そして作り始めた当初はいろいろ入れようと思いましたが、どうしても大会の２５６手ルール問題が有り、スピード感を追求した結果が横歩取りでした。

ただ、どんな良い物を作ったとしても知名度が無ければ普及しないし、そいうった意味では将棋レーティングサイトとして活躍されていた
uuunuuunさんの協力を得られたことは大きかったです。

それがやっと将棋ソフト開発者の目にもとまり、elmo開発者やQhapaq開発者といった人達に波及し、wcsc27になんとか間に合ったというのが現在だと思います。

そんな中「定跡？いまさら？」みたいなPonanzaが数ヶ月オープンソース勢が研鑽してきた舞台にひょっこり足を踏み入れて、elmoにフルボッコにされたのがwcsc27だったと見ています。
Ponanzaはいままで初手から意味不明な動きをして、残りの９８％の舞台で主に評価関数の差で勝っていたにすぎなかったことが判明したということでもあります。
もちろんelmo開発者の評価関数のブレイクスルーを始め、神がかったタイミングでやねうら王の探索部が改良されたり、本当にいろんなことが重なった劇的な結末だったと思います。

ですから今回の「第27回世界コンピュータ将棋選手権」の独創賞に該当者なしは意味がわかりません。
elmo定跡とQhapaq定跡の作成方法はある意味「初めてまともな将棋の定跡をコンピュータが機械導出」したのですから。
私はこの大会って【コンピュータ】将棋選手権じゃなかったの？と非常に疑問に思いました。

elmo定跡なんて将棋の定跡世界から言えば、たったの０．３％程度の赤ちゃんです。
でも機械導出できたんですよ。
コンピュータの世界なら機械導出さえ出来ればあとは計算リソースの問題だけです。

例えば、Ponanzaが次の大会で定跡外せば何とかなるだろって高を括っていれば、その間にPonanzaの棋譜等を参考にelmo、Qhapaq、tanuki-、読み太、の評価関数バイナリで
いろんな角度から有効手を機械導出して、チェスのオープニングのように共有しておけば、Ponanzaに一発入る確率が３０％以上とかのソフトがごろごろしている大会になることだってありえます。
そのくらい将棋の序盤にブレイクスルーが起きた大会だったと私は思っています。


定跡を作成している立場で言えば、elmo定跡とQhapaq定跡は性質が違います。

elmo定跡はあくまで自分の評価関数の強さに依存していて、勝率とリンクさせることによって自分の評価関数の力を最大限に発揮するように作った定跡です。
作成過程でまふ定跡のように、いろいろ有効手を試した定跡にぶつけると大幅に手間が省略できる感じです。

Qhapaq定跡は多角的にいろんな定跡をぶつけることによって、将棋の本質的に好手となる手を機械導出しようとした定跡です。
ですからQhapaq定跡は他のソフトに組み込んでもレーティングの上昇が見込めますし、今大会後に発表されたソフトから生成される棋譜を使えばさらに上が見込めます。

もちろんこれらを１人の開発者が全部やる必要は無いと思います。
チェスのようにオープニングデータベースとして共有する目的で、各開発者が協力する時代が来ても良いと思います。



■やねうら王2017-Early V4.41　強すぎ

tanuki- さんの修正が来たのでV4.41相当を使ってみましたが強すぎます。
ＳＭ１．２５＋elmoも次元の違う強さだけど、V4.41相当＋elmoはそれすら軽くひねる。

Ponanza相手にハンデ状態（低スペックハード）で勝つはずだわ。
やねうら王マジで天才。
何いじったらこんなことになるの？
探索部もいきなりブレイクスルーしてる。


------------以下書きかけ--------------