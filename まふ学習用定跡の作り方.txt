まふ学習用定跡関連について書いておきます


■千田六段のTwitter質問

＞まふさんの採用率1はどうやっているのだろう。 単純に追加していくと採用率が大きく変化してしまうし、
＞局面ごとに調整しようとしても追いきれない量になってしまうし。

ShogiGUIを使用したやり方です。

①事前に作成したい定跡を作成しておきます（普段使いの採用率を調整したもので良い）

②ShogiGUIでベースとして使いたい定跡を読み込みます
定跡⇒定跡管理⇒追加
定跡⇒定跡を開く

③定跡が読み込めたら
定跡⇒エクスポート⇒ＫＩＦ
何処かに保存すれば、ただ指し手がすべて入っただけのＫＩＦファイルが出来ます。

④登録
定跡⇒新規作成⇒平手
で、まっさらな状態の定跡に③で作ったＫＩＦファイルを登録します
定跡画面の真っ白なところにマウスでＫＩＦファイルをドラッグ＆ドロップして突っ込んでも良い

⑤完成
ＫＩＦファイルの登録が終わると、すべての指し手が採用率0.01の定跡が出来上がります。
（0.01とかShogiGUI使っている人にしか分からないことなので、採用率１の・・・って書きました）

⑥任意の局面比率を大きくしたい場合
採用率0.01の定跡に特定のＫＩＦファイル等をどんどん追加するだけです。

以上となります。

⑦ちょっとしたテクニック
将棋の機械学習は初手の指し手比率で好む戦法が大きく変わるので調整する。
例１）７六歩を多めにする⇒elmoみたいになる
例２）２六歩を３０％程度入れる⇒相掛かり＋角換わりを好むようになる

⑧さらにマニアックな技
相掛かりの出だしから１１手目まで飛車先の交換をして▲２八飛と引くところまで採用率１００％としてbookmoves 11 設定で教師局面を作る。
これで隙あらば飛車先を交換しに行く評価関数が出来ます。
が、棒銀大好きマンになって弱くなります。
教師生成がdepth6とか浅い探索で教師局面を作るとどうしても単純動作を学習してしまうようです。
ですから、勝率を上げようと思えば、飛車先を交換しない局面を学習することになります。
つまり、飛車先を交換しないことがPonanza流ではなく、機械学習の特性上勝率を追いかけていくと勝手にこうなります。

このように私自身が評価関数を作ってみて分かったことがいくつも有りました。
コンピュータ将棋はコンピュータ将棋なりの理が存在するようです。
この辺はコンピュータ将棋を自身に取り込むときに多少注意しなければいけない所かもしれません。
