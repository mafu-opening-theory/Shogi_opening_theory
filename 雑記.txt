■qhapaqさんの「アピール文から読み解くWCSC27の見どころ（Apery編、書きかけ）」を読んで

いつも楽しく拝読しています。

・雑巾絞りの性質とソフトの棋風の関連性について私が１つ補足するとするならば、まふ定跡ver10で入れています
▲7六歩△3四歩▲2六歩△8四歩▲2五歩△8五歩▲7八金△3二金▲2四歩△同歩▲同飛△8六歩▲同歩△同飛▲5八玉△5二玉▲2六飛△8二飛▲8七歩打△2三歩打▲3八銀△7二銀
この局面から
MultiPV＝１の３０００万ノード
MultiPV＝３の３０００万ノード
を対局させた場合、MultiPV＝１のほうは▲５二玉のまま戦おうとしますが、
MultiPV＝３のほうは高確率で升田式ひねり飛車（坊主美濃）のように▲２八玉まで移動しようとします。

通常、升田式ひねり飛車は相手が駒組みをしているなら▲４八玉、▲３八玉、▲２八玉と移動していく構想ですが、まふ定跡の場合△7二銀の時点で最初の駒組みは終わっているとも言えます。
ここから▲４八玉、▲３九玉なんて移動していくなら６九の地点にデッカイ穴が出来てしまいます。
後手の飛車先が切れているので、角交換から△６九角打で強引に飛車をねじ込まれます。

つまり、MultiPV＝３の３０００万ノードでは広く浅く読んでしまった結果、その手筋の評価が正しく成されていないものだと思われます。
この角交換から△６九角打で強引に飛車をねじ込む指し手を見て将棋ソフトは豪腕だと思う人は、その前段階の局面が正しく認識出来ていないものだと思われます。

わかりやすく浅いノード数の例をあげましたが、深い探索でも読み抜けがあったり、Ponderヒットにより読み抜けすれば同じことが起こります。
具体例は読み太のver2以降です。
qhapaqさんもstockfishはビビり過ぎと書いていた気がしますが、チェスは駒が減っていくので将棋と違って１ミスでどうしようも無くなります。
将棋は一時的に駒が取られても、後から取り返せるのであれば駒を捨てることが出来るくらいには違います。

これを探索部がほぼstockfishの状態であるSILENT_MAJORITYと、枝刈りを調整した読み太ver2以降を同じ持ち時間＋評価関数、定跡ＯＦＦで比べるとこうなります。

序盤・・・SILENT_MAJORITY＞読み太
中盤・・・SILENT_MAJORITY＝読み太
終盤・・・SILENT_MAJORITY＜読み太

１ミスでどうしようも無くなるチェスのプログラムでは序盤＋中盤初期までが異常に強いです。（保守的な動きの大きな理由のひとつと思います）
また、読み太のほうは枝刈りが激しいので、定跡ＯＦＦだと序盤ＰＶハマりを起こしやすい。千日手を拾いやすい等の問題が重なります。

チェスは定跡が整備されていること。駒が減っていくことで探索深さが増えていくこと。終盤が整備されていること。
これらの構造上、中盤初期に合わせているプログラムであると予想されます。
将棋の場合は駒の総和が最初から最後まで変わらないので、探索はどんどん負荷がかかります。（詰みを見つけるまで）

ある一定のノード数を超えると激しい枝刈りでもＰＶを見直したり（反復深化深さ優先探索？）して同じ読み筋にたどり着きます。
また、同じ評価関数を使うと見えにくいですが、相手の指し手が予想手と違ってfollow up movesが利かずにＰＶの読み直しが起こると読み太のほうが良いです。
このことからどちらが将棋のプログラムとして合っているかと言えば、読み太のほうだと私は思います。
（序盤の問題を定跡整備でカバーするか、定跡から逃げて評価関数で勝負するかの問題はあると思いますが）

大将軍編の記事で評価関数のパラメタ数に疑問を持たれていましたが、圧倒的に少ない２駒の新技巧がどのくらいの強さなのか比較すれば、
そもそもＫＰＰＴ程必要なのかどうなのかわかるのではないでしょうか。



■まふ定跡がやねうら王形式に対応していない件について

別に私がやねうら王形式を否定している訳ではありません。
（むしろソフト開発者的にsfen形式のほうが良いのではないかと思っています）
単純にShogiGUI開発者様のBookConvを使用して変換している関係で出来ないのです。
（https://github.com/ai5/BookConv/releases）

ShogiGUIの定跡ファイル形式＝SBKファイルからやねうら王定跡(.db)に変換すると、採用率０の千日手が含まれる定跡でハングしていたと思います。
同様の不具合が技巧形式で存在し開発者様にご無理を言って直していただきました。

ひょっとしたらBookConvの入力が技巧に対応しているのでまふ定跡技巧版を入力し、やねうら王定跡に出力すればいけるかも？（未検証）
※ただし、ShogiGUIの定跡ファイルからやねうら王定跡(.db)に変換すると対局数が採用率となり、意図した動作にならなかったと思います。

どなたかやねうら王形式の出力に対応していただければ、変換添付したいと思っています。

また、BookConvの出力はShogiGUIの定跡（.sbk)にも出来るので、まふ定跡技巧版を入力すれば誰でも簡単に加工出来るのでは？（未検証）
※たしか技巧形式に変換するときは、採用率０％の指し手は削除されていた気がしますが。ソフト開発者的にはそっちのほうが良い？